<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>لوحة التحكم | ChamCard Admin</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="sidebar">
        <div class="logo">
            <div class="logo-icon">C</div>
            <span>ChamCard</span>
        </div>
        <ul class="nav-links">
            <li><a href="dashboard.html" class="active">لوحة التحكم</a></li>
            <li><a href="transactions.html">العمليات</a></li>
            <li><a href="accounting.html">المحاسبة</a></li>
            <li><a href="customers.html">العملاء</a></li>
            <li><a href="cards.html">البطاقات</a></li>
            <li><a href="validators.html">أجهزة الباص</a></li>
            <li><a href="audit.html">سجل التدقيق</a></li>
            <li style="margin-top: auto; padding-top: 40px;">
                <a href="#" onclick="logout()" style="color: var(--danger-red);">تسجيل خروج</a>
            </li>
        </ul>
    </div>

    <div class="main-content">
        <header>
            <h1>نظرة عامة على النظام</h1>
            <div id="adminName" style="font-weight: 700; color: var(--primary-blue);">أدمن</div>
        </header>

        <div class="stats-grid">
            <div class="stat-card">
                <span class="label">دخل اليوم</span>
                <span class="value" id="todayRevenue">0 ل.س</span>
            </div>
            <div class="stat-card">
                <span class="label">صرف اليوم</span>
                <span class="value" id="todayExpense" style="color: var(--danger-red);">0 ل.س</span>
            </div>
            <div class="stat-card">
                <span class="label">صافي اليوم</span>
                <span class="value" id="netRevenue" style="color: var(--primary-blue);">0 ل.س</span>
            </div>
            <div class="stat-card">
                <span class="label">العمليات اليوم</span>
                <span class="value" id="txCount">0</span>
            </div>
            <div class="stat-card">
                <span class="label">العملاء النشطين</span>
                <span class="value" id="dau">0</span>
            </div>
            <div class="stat-card">
                <span class="label">الأجهزة النشطة</span>
                <span class="value" id="activeValidators">0</span>
            </div>
        </div>

        <div class="card-container">
            <div style="padding: 20px; font-weight: 800; border-bottom: 1px solid var(--border-color); display: flex; align-items: center; gap: 10px;">
                <span style="color: #f59e0b;">●</span> تنبيهات الأمان (محاولات مشبوهة)
            </div>
            <div style="padding: 40px; text-align: center; color: var(--text-secondary); font-size: 0.9rem;">
                لا توجد تنبيهات أمنية حالياً. جميع العمليات تسير بشكل طبيعي.
            </div>
        </div>
    </div>

    <script src="js/app.js"></script>
    <script>
        window.onload = async () => {
            if (await checkAuth()) {
                loadDashboardData();
            }
        };
    </script>
</body>
</html>